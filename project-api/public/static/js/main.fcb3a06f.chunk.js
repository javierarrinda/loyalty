(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,t,n){},27:function(e,t,n){e.exports=n(58)},33:function(e,t,n){},58:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(25),o=n.n(s),l=(n(33),n(2)),c=n(3),u=n(5),i=n(4),p=n(6),m=(n(14),n(7)),h=n.n(m),d=function e(){var t=this;Object(l.a)(this,e),this.signup=function(e,n){return t.service.post("/signup",{username:e,password:n}).then(function(e){return e.data})},this.login=function(e,n){return t.service.post("/login",{username:e,password:n}).then(function(e){return e.data})},this.loggedin=function(){return t.service.get("/loggedin").then(function(e){return e.data})},this.logout=function(){return t.service.post("/logout",{}).then(function(e){return e.data})},this.getAllCustomers=function(){return t.service.get("/customers").then(function(e){return e.data})};var n=h.a.create({baseURL:"http://localhost:5000/api",withCredentials:!0});this.service=n},g=n(59),f=n(61),E=n(62),v=n(9),b=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(u.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(r)))).state={usernameInput:"",passwordInput:""},n.service=new d,n.handleChange=function(e){n.setState(Object(v.a)({},e.target.name,e.target.value))},n.handleFormSubmit=function(e){e.preventDefault(),n.service.signup(n.state.usernameInput,n.state.passwordInput).then(function(e){console.log("------------------------",e),n.props.logTheUserIntoAppComponent(e),n.setState({usernameInput:"",passwordInput:""}),n.props.history.push("/restaurant-index")}).catch(function(e){console.log("sorry something went wrong",e)})},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"login-form-parent"},r.a.createElement("form",{className:"login-form",onSubmit:this.handleFormSubmit},r.a.createElement("div",null,r.a.createElement("input",{placeholder:"USERNAME",type:"text",name:"usernameInput",value:this.state.usernameInput,onChange:function(t){return e.handleChange(t)}}),r.a.createElement("input",{placeholder:"PASSWORD",name:"passwordInput",value:this.state.passwordInput,onChange:function(t){return e.handleChange(t)}})),r.a.createElement("input",{type:"submit",value:"Signup"}),r.a.createElement("p",null,"Already have account?",r.a.createElement(g.a,{to:"/login"}," Login"))))}}]),t}(a.Component),w=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(u.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(r)))).state={usernameInput:"",passwordInput:""},n.userService=new d,n.handleChange=function(e){n.setState(Object(v.a)({},e.target.name,e.target.value))},n.handleFormSubmit=function(e){e.preventDefault(),n.userService.login(n.state.usernameInput,n.state.passwordInput).then(function(e){console.log(e),n.setState({usernameInput:"",passwordInput:""}),n.props.logTheUserIntoAppComponent(e),n.props.history.push("/restaurant-index")}).catch(function(e){console.log("sorry something went wrong",e)})},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"login-form-parent"},r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.handleFormSubmit,className:"login-form"},r.a.createElement("div",null,r.a.createElement("input",{placeholder:"USERNAME",type:"text",name:"usernameInput",value:this.state.usernameInput,onChange:function(t){return e.handleChange(t)}}),r.a.createElement("input",{placeholder:"PASSWORD",name:"passwordInput",value:this.state.passwordInput,onChange:function(t){return e.handleChange(t)}})),r.a.createElement("button",{id:"button-id",type:"submit",value:"Login"},"Continue"))))}}]),t}(a.Component),I=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(s)))).state={nameInput:"",phoneInput:"",editing:!1},n.updateInput=function(e){n.setState(Object(v.a)({},e.target.id,e.target.value))},n.editProject=function(e){e.preventDefault(),h.a.post("https://lost-in-loyalty.herokuapp.com/api/tasks/edit/"+n.state.theActualCustomer._id,{theTitle:n.state.nameInput,theDescription:n.state.phoneInput}).then(function(){n.setState({editing:!1})}).catch(function(){})},n.toggleForm=function(){n.setState({editing:!0})},n.showProjectDetails=function(){if(n.state.theActualCustomer)return n.state.editing?r.a.createElement("form",{onSubmit:n.editProject},r.a.createElement("input",{className:"input",value:n.state.nameInput,onChange:n.updateInput,id:"nameInput"}),r.a.createElement("input",{className:"input",value:n.state.phoneInput,onChange:n.updateInput,id:"phoneInput"}),r.a.createElement("input",{className:"input",value:n.state.spendingInput,onChange:n.updateInput,id:"spendingInput"}),r.a.createElement("button",null,"submit changes")):r.a.createElement("div",null,r.a.createElement("span",null,n.state.nameInput),r.a.createElement("span",null,n.state.phoneInput),r.a.createElement("span",null,n.state.spendingInput),r.a.createElement("img",{onClick:n.toggleForm,className:"pen-pic",src:"https://us.123rf.com/450wm/jemastock/jemastock1707/jemastock170717063/82921914-stock-vector-school-pen-write-supply-accessory-icon-vector-illustration.jpg?ver=6",alt:"pen"}))},n.deleteProject=function(){h.a.post("https://lost-in-loyalty.herokuapp.com/api/tasks/delete/"+n.state.theActualCustomer._id,{}).then(function(){n.props.history.push("/project-index")}).catch(function(){})},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){var e=this,t=this.props.match.params.id;h.a.get("https://lost-in-loyalty.herokuapp.com/api/customers/details/"+t).then(function(t){console.log("------___---__-_-_--_-_-__-_-_-_-_-___-_-----",t),e.setState({theActualCustomer:t.data,nameInput:t.data.name,phoneInput:t.data.phone})}).catch(function(){})}},{key:"render",value:function(){return console.log(this.props),console.log(this.state),r.a.createElement("div",null,r.a.createElement("h1",null," Project Details Page"),this.showProjectDetails(),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement("button",{onClick:this.deleteProject,className:"delete"},"Delete This Project")))}}]),t}(a.Component),y=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"main-page"},r.a.createElement("div",{className:"header"},r.a.createElement("img",{src:"/lost-in-loyalty.png",alt:"loyalty"})),r.a.createElement("div",{className:"our-mission"},r.a.createElement("h2",null,"Our Mission"),r.a.createElement("p",null,"Cradles to Crayons: Provides children from ",r.a.createElement("br",null),"birth through age 12, living in homeless or low-income",r.a.createElement("br",null)," situations, with the essential items",r.a.createElement("br",null)," they need to thrive",r.a.createElement("br",null)," \u2013 at home, at school and at play.")),r.a.createElement("div",{className:"our-team"},r.a.createElement("h2",null,"Our Team"),r.a.createElement("div",{className:"team-images"},r.a.createElement("img",{className:"kodak",src:"/kodak.png",alt:"kodak"}),r.a.createElement("img",{className:"kodak",src:"/kodak.png",alt:"kodak"}),r.a.createElement("img",{className:"kodak",src:"/kodak.png",alt:"kodak"}))),r.a.createElement("div",{className:"contact"},r.a.createElement("h2",null,"Contact Us"),r.a.createElement("label",null,"Drop a line:"),r.a.createElement("br",null),r.a.createElement("input",{type:"textarea"}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("button",null,"Send"),r.a.createElement("div",{className:"contact-us"},r.a.createElement("h5",null,"Follow us on Twitter"),r.a.createElement("h5",null,"Follow us on Instagram"))))}}]),t}(a.Component),C=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(s)))).state={thresholdInput:"",nameInput:"",descriptionInput:"",customerResponse:[],rewardResponse:{},editing:!1},n.updateInput=function(e){n.setState(Object(v.a)({},e.target.id,e.target.value))},n.showUsersForReward=function(){return n.state.customerResponse.map(function(e){return r.a.createElement("div",{className:"user-rewards"},r.a.createElement("h3",null,"Name: ",e.name),r.a.createElement("h3",null,"Spent: $",e.spending))})},n.editReward=function(e){e.preventDefault();var t=n.props.match.params.id;h.a.post("https://lost-in-loyalty.herokuapp.com/api/rewards/edit/"+t,{theName:n.state.nameInput,theDescription:n.state.descriptionInput,theThreshold:n.state.thresholdInput},{withCredentials:!0}).then(function(e){console.log(e),n.setState({editing:!1})}).catch(function(e){console.log("error occurred",e)})},n.toggleForm=function(){n.setState({editing:!0})},n.showRewardsForm=function(){if(n.state.rewardResponse)return n.state.editing?r.a.createElement("form",{onSubmit:n.editReward},r.a.createElement("input",{value:n.state.nameInput,onChange:n.updateInput}),r.a.createElement("input",{value:n.state.descriptionInput,onChange:n.updateInput}),r.a.createElement("input",{value:n.state.thresholdInput,onChange:n.updateInput}),r.a.createElement("button",null,"Submit")):r.a.createElement("div",{className:"reward-details-b"},r.a.createElement("h2",null,n.state.rewardResponse.name),r.a.createElement("p",null,n.state.rewardResponse.description),"$ ",n.state.rewardResponse.threshold,r.a.createElement("button",{onClick:n.toggleForm},"Edit"))},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){var e=this,t=this.props.match.params.id;console.log("component will mount this",this),h.a.post("https://lost-in-loyalty.herokuapp.com/api/rewards/approved/"+t,{},{withCredentials:!0}).then(function(t){console.log(t),e.setState({customerResponse:t.data.customerResponse,rewardResponse:t.data.rewardResponse})}).catch(function(e){console.log(e)})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"Reward Details: "),this.showRewardsForm(),r.a.createElement("div",{className:"user-rewards-div"},r.a.createElement("h2",null,"Customers for this Reward:"),this.showUsersForReward()))}}]),t}(a.Component),j=n(13),O=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(s)))).state={allTheRewards:[]},n.fetchRewards=function(){console.log(Object(j.a)(Object(j.a)(n))),h.a.get("https://lost-in-loyalty.herokuapp.com/api/rewards",{withCredentials:!0}).then(function(e){console.log("api rewards go here",e),n.setState({allTheRewards:e.data.rewardGotten})}).catch(function(e){console.log("error",e)})},n.showAllRewards=function(){if(console.log("thisthisthisthis",Object(j.a)(Object(j.a)(n))),n.state.allTheRewards&&n.props.currentUser){var e=n.state.allTheRewards.filter(function(e){return console.log("each reward",e),e.restaurantID===n.props.currentUser._id});return console.log("my rewards",e),e.map(function(e){return r.a.createElement("div",null,r.a.createElement(g.a,{id:"rewards-links",to:"/rewards/edit/"+e._id},e.name))})}},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){this.fetchRewards()}},{key:"render",value:function(){return r.a.createElement("div",{className:"show-rewards-box"},r.a.createElement("h2",null,"Rewards:"),this.showAllRewards())}}]),t}(a.Component),k=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(u.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(r)))).state={thresholdInput:"",nameInput:"",descriptionInput:""},n.updateInput=function(e){n.setState(Object(v.a)({},e.target.id,e.target.value))},n.createANewReward=function(e){var t=n.state.thresholdInput,a=n.state.nameInput,r=n.state.descriptionInput;h.a.post("https://lost-in-loyalty.herokuapp.com/api/rewards/newReward",{threshold:t,name:a,description:r},{withCredentials:!0}).then(function(e){console.log("reward response here",e)}).catch(function(e){console.log("error creating reward",e)})},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"new-reward-component"},r.a.createElement("h2",null,"Add Reward:"),r.a.createElement("form",{onSubmit:this.createANewReward},r.a.createElement("span",null,r.a.createElement("label",null,"Title:"),r.a.createElement("input",{value:this.state.nameInput,id:"nameInput",onChange:this.updateInput})),r.a.createElement("span",null,r.a.createElement("label",null,"Description:"),r.a.createElement("input",{type:"textarea",value:this.state.descriptionInput,id:"descriptionInput",onChange:this.updateInput})),r.a.createElement("span",null,r.a.createElement("label",null,"Spending:"),r.a.createElement("input",{type:"number",value:this.state.thresholdInput,id:"thresholdInput",onChange:this.updateInput})),r.a.createElement("button",null,"Add")))}}]),t}(a.Component),S=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(u.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(r)))).state={nameInput:"",phoneInput:"",spendingInput:""},n.updateInput=function(e){n.setState(Object(v.a)({},e.target.id,e.target.value))},n.createANewCustomer=function(e){e.preventDefault();var t=n.state.nameInput,a=n.state.spendingInput,r=n.state.phoneInput;h.a.post("https://lost-in-loyalty.herokuapp.com/api/customers/newCustomer",{name:t,spending:a,phone:r},{withCredentials:!0}).then(function(e){console.log("success",e),n.props.letTheIndexComponentKnowThatWeAddedACustomer()}).catch(function(e){console.log("error creating task",e)})},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"addCustomer"},r.a.createElement("h2",null,"Add New Customer:"),r.a.createElement("form",{onSubmit:this.createANewCustomer},r.a.createElement("span",null,r.a.createElement("label",null,"Name:"),r.a.createElement("input",{value:this.state.nameInput,id:"nameInput",onChange:this.updateInput})),r.a.createElement("span",null,r.a.createElement("label",null,"Phone Num:"),r.a.createElement("input",{type:"number",value:this.state.phoneInput,id:"phoneInput",onChange:this.updateInput})),r.a.createElement("span",null,r.a.createElement("label",null,"Spending:"),r.a.createElement("input",{type:"number",value:this.state.spendingInput,id:"spendingInput",onChange:this.updateInput})),r.a.createElement("button",null,"Add")))}}]),t}(a.Component),N=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(u.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(r)))).state={phoneInput:"",spendingInput:"",theUserToUpdate:{}},n.service=new d,n.updateInput=function(e){n.setState(Object(v.a)({},e.target.id,e.target.value))},n.updateSpending=function(e){console.log("this is User Service -- ",n.service);var t=n.state.spendingInput;e.preventDefault(),n.service.getAllCustomers().then(function(e){console.log("these are all the user",e);var a=e.customerForThisRest.filter(function(e){return console.log("each user .>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> ",e,n.state),e.phone==n.state.phoneInput});console.log("this is the user to update  ----",a[0].spending),h.a.post("https://lost-in-loyalty.herokuapp.com/api/customers/edit/"+a[0]._id,{spending:t},{withCredentials:!0}).then(function(e){n.setState({theUserToUpdate:e.data.spending}),console.log("the user to update log",n.state.theUserToUpdate),console.log("updated spending is this ",e),n.props.updateCustomer(e)}).catch(function(e){console.log("error creating task",e)})}).catch(function(e){console.log(e)})},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"update-through-phone"},r.a.createElement("form",{onSubmit:this.updateSpending},r.a.createElement("h3",null,"Update Customer by Number: "),r.a.createElement("span",null,r.a.createElement("label",null,"Phone Number:"),r.a.createElement("input",{type:"number",value:this.state.phoneInput,id:"phoneInput",onChange:this.updateInput})),r.a.createElement("span",null,r.a.createElement("label",null,"Spending:"),r.a.createElement("input",{type:"number",value:this.state.spendingInput,id:"spendingInput",onChange:this.updateInput})),r.a.createElement("button",{type:"submit"},"Update")))}}]),t}(a.Component),U=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(s)))).state={allTheCustomers:[]},n.updateCustomer=function(e){console.log("this is ross (the user we are passing in)",e);var t=n.state.allTheCustomers.map(function(t){return console.log("each customer log",t,e),t._id==e.data._id?e.data:t});console.log("updating is ",t),n.setState({allTheCustomers:t})},n.fetchCustomers=function(){console.log(Object(j.a)(Object(j.a)(n))),console.log(n.props),h.a.get("https://lost-in-loyalty.herokuapp.com/api/customers",{withCredentials:!0}).then(function(e){console.log("this is the response from api for customers",e),n.setState({allTheCustomers:e.data.customerForThisRest.reverse()})}).catch(function(e){})},n.showAllCustomers=function(){if(console.log("this is this----",Object(j.a)(Object(j.a)(n))),n.state.allTheCustomers&&n.props.currentUser){var e=n.state.allTheCustomers.filter(function(e){return e.restaurantID===n.props.currentUser._id});return console.log(e),e.map(function(e){return r.a.createElement("div",{key:e._id,className:"countries-flex"},r.a.createElement("div",{className:"box-for-each-customer"},r.a.createElement("h3",null,e.name),r.a.createElement("h3",null,"Phone #: ",e.phone),r.a.createElement("h4",null,"Spent: ",e.spending),r.a.createElement(g.a,{to:"/customers/details"+e._id},"See Details")))})}},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){this.fetchCustomers()}},{key:"render",value:function(){return console.log("this is this on index",this),r.a.createElement("div",{className:"restaurant-index"},r.a.createElement("div",{className:"space-evenly"},r.a.createElement("div",{className:"add-new-customer"},r.a.createElement(S,{letTheIndexComponentKnowThatWeAddedACustomer:this.fetchCustomers})),r.a.createElement("div",null,r.a.createElement(N,{updateCustomer:this.updateCustomer})),r.a.createElement("div",{className:"add-new-reward"},r.a.createElement(k,null)),r.a.createElement("div",{className:"show-rewards"},r.a.createElement(O,{currentUser:this.props.currentUser}))),r.a.createElement("h1",null,"Your Customers"),r.a.createElement("div",{className:"show-all-customers"},this.showAllCustomers()))}}]),t}(a.Component),A=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(s)))).state={loggedInUser:null,error:null,details:""},n.service=new d,n.logInTheUser=function(e){e.username?n.setState({loggedInUser:e,error:!1}):n.setState({error:!0,details:e})},n.showUser=function(){return n.state.error?r.a.createElement("div",null,"sry, ",n.state.details.message):n.state.loggedInUser?r.a.createElement("div",null,"Welcome, ",n.state.loggedInUser.username):void 0},n.logout=function(){n.service.logout().then(function(){n.setState({loggedInUser:null})})},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(e){console.log("in app"),this.fetchUser()}},{key:"fetchUser",value:function(){var e=this;this.service.loggedin().then(function(t){console.log(t),e.setState({loggedInUser:t})}).catch(function(t){console.log("catch getting hit"),e.setState({loggedInUser:!1})})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"mainPage"},r.a.createElement("nav",null,r.a.createElement("p",null,this.showUser()),r.a.createElement(g.a,{to:"/",class:"link"},r.a.createElement("img",{src:"/lost-in-loyalty.png",alt:"loyalty"})),r.a.createElement(g.a,{to:"/signup",class:"link"}," Register"),r.a.createElement(g.a,{to:"/login",class:"link"}," Login "),r.a.createElement(g.a,{to:"/restaurant-index",class:"link"}," Customers"),r.a.createElement("button",{onClick:this.logout},"Logout")),r.a.createElement(f.a,null,r.a.createElement(E.a,{path:"/login",render:function(t){return r.a.createElement(w,Object.assign({},t,{logTheUserIntoAppComponent:e.logInTheUser}))}}),r.a.createElement(E.a,{path:"/signup",render:function(t){return r.a.createElement(b,Object.assign({},t,{logTheUserIntoAppComponent:e.logInTheUser}))}}),r.a.createElement(E.a,{path:"/restaurant-index",render:function(t){return r.a.createElement(U,Object.assign({},t,{currentUser:e.state.loggedInUser}))}}),r.a.createElement(E.a,{path:"/customers/details/:id",component:I}),r.a.createElement(E.a,{path:"/rewards/edit/:id",render:function(t){return r.a.createElement(C,Object.assign({},t,{currentUser:e.state.loggedInUser}))}}),r.a.createElement(E.a,{path:"/",component:y})))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var R=n(60);o.a.render(r.a.createElement(R.a,null,r.a.createElement(A,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[27,2,1]]]);
//# sourceMappingURL=main.fcb3a06f.chunk.js.map